<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">

  <link rel="stylesheet" media="all" href="theme/css/mbr-changes.css">

  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue">
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 style="color:#555 !important" data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide class="" >
    <hgroup><h2>Blockchain</h2></hgroup>
    <article class="build">
      <h3 style="color:white">
        &hellip;a distributed ledger without the need for a trusted, centralized entity.<br/><br/>
      </h3>

      <h3 style="color:white">
        <img src="imgs/schema0.png" style="width:900px;height:auto;margin-top:-20px;"  />
      </h3>

      <h3 style="color:white">
        &hellip;consensus is achieved using <em>Proof-of-Work</em>, <em>Proof-of-Stake</em>,
        <em>Proof-of-Authority</em>, or some other Byzantine agreement protocol.
      </h3>
    </article>
  </slide>

  <slide class="">
    <hgroup><h2>
      Full Nodes
    </h2></hgroup>
    <article class="">
      <ul class="large-list" style="margin-top:100px;margin-left:50px;">
        <li>Contain every single block with all transactions</li>
        <li>Full capabilities: creating transactions, &hellip;</li>
        <li>Bitcoin: Currently ~185 GB</li>
      </ul>
    </article>
  </slide>

  <slide class="">
    <hgroup><h2>
      The problem
    </h2></hgroup>
    <article class="">
      <ul class="large-list" style="margin-top:100px;margin-left:150px;">
        <li>Smartphones?</li>
        <li>Cars?</li>
        <li>Washing Machines?</li>
        <li>&hellip;</li>
      </ul>
    </article>
  </slide>

  <slide class="nobackground" style="background:white;">
    <hgroup><h2>
      Simplified Blockchain Header
    </h2></hgroup>
  <article style="text-align:center;padding-top:110px;">
    <img src="imgs/btc-nomarker.jpg" style="width:1000px;height:auto;margin-top:0px;"  />
    <footer class="source" style="color:white;">
      source: https://blog.ethereum.org/2015/11/15/merkling-in-ethereum
    </footer>
  </article>
  </slide>

  <slide class="nobackground" style="background:white;">
    <hgroup><h2>
      Simplified Blockchain Header
    </h2></hgroup>
    <article style="text-align:center;padding-top:110px;">
      <img src="imgs/btc.jpg" style="width:1000px;height:auto;margin-top:0px;"  />
      <footer class="source" style="color:white">
        source: https://blog.ethereum.org/2015/11/15/merkling-in-ethereum
      </footer>
    </article>
  </slide>

  <slide class="fill nobackground" style="background-image: url(imgs/tree0.png);background-position:center bottom;">
  <footer class="source" style="color:white">
    source: https://hackernoon.com/merkle-trees-181cb4bc30b4
  </footer>
  </slide>


  <slide class="fill nobackground" style="background-image: url(imgs/tree2.png);background-position:center bottom;">
  <footer class="source" style="color:white">
    source: https://hackernoon.com/merkle-trees-181cb4bc30b4
  </footer>
  </slide>

  <slide class="fill nobackground" style="background-image: url(imgs/tree3.png);background-position:center bottom;">
  <footer class="source" style="color:white">
    source: https://hackernoon.com/merkle-trees-181cb4bc30b4
  </footer>
  </slide>

  <slide class="fill nobackground" style="background-image: url(imgs/tree1.png);background-position:center bottom;">
  <footer class="source" style="color:white">
    source: https://hackernoon.com/merkle-trees-181cb4bc30b4
  </footer>
  </slide>

  <slide class="">
    <hgroup><h2></h2></hgroup>
    <article class="">
      <ul class="large-list" style="margin-top:100px;margin-left:50px;">
        <li>Every change affects root</li>
        <li>Integrity of entire dataset is encapsulated in root<br/><br/></li>
          <li>&rarr;Only necessary to store root hash</li>
          <li>&rarr;Recalculating root hash is efficient</li>
         </ul>

      <div>
        <ul class="large-list build" style="margin-left:50px;">
          <li>&rarr;<span class="italic mbr">Validating that a hash is part of a tree: Merkle Proofs<span></li>
       </div>

    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Scenario</h2></hgroup>
    <article class="large-list" style="line-spacing:4em !important;">
      I made a transaction T and want to know:<br/><br/>
      "<span class="italic">Was T included in the latest block?</span>"<br/>
      (<i>i.e. it went through</i>)
      <br/><br/><br/>

        Option 1:<br/><br/>
      <div class="build">
        <ul>
          <li>Set up full node, download entire chain</li>
          <li>In each block search through transactions</li>
          <li>&rarr; Not feasible for Smartphones/IoT devices/&hellip;</li>
        </ul>
      </div>

    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Option 2</h2></hgroup>
    <article class="">
      <ul class="large-list" style="margin-left:50px;">
        <li>Follow chain, but download only headers &ndash; not transactions.<br/><br/><li>
        <li>Bitcoin: Header = 80 bytes, ~43 MB entire chain.<br/><br/></li>
      </ul>
      <ul class="large-list build" style="margin-left:50px;">
        <li><img src="imgs/btc.jpg" style="width:1000px;height:auto;margin-top:0px;"  /></li>
      </ul>
    </article>
  </slide>


  <slide class="" >
    <hgroup><h2>A better Idea</h2></hgroup>
    <article class="">
      <center>
        <img src="imgs/tree-local.png" style="width:900px;height:auto;"  />
      </center>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Option 2</h2></hgroup>
    <article class="">
      <center>
        <img src="imgs/tree-spv.png" style="width:900px;height:auto;
        margin-top:-20px;margin-bottom:10px;"  />
      </center>
      <div class="build">
        <center>&rarr; In Bitcoin the tree typically has hundreds transactions/branches</center>
      </div>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Option 2</h2></hgroup>
    <article class="">
      <center>
        <img src="imgs/tree-spv2.png" style="width:900px;height:auto;
        margin-top:-20px;margin-bottom:10px;"  />
      </center>
      <div class="build">
        <center>&rarr; In Bitcoin the tree typically has hundreds transactions/branches</center>
      </div>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>
      Simple Payment Verification (SPV)
    </h2></hgroup>
    <article class="">
      <ul class="build large-list" style="">
        <li>
          Ask a full node:<br/>
          <span class="italic">"Was T in the last block?"</span>
        </li>
        <li>Full node checks transactions and responds:<br/><span class="italic">"Yes, here's the path from transaction up to root hash"</span></li>
        <li>Light client computes<br/><span style="font-family:monospace;">MerkleRoot' = Hash(T) + receivedPath</span></li>
        <li>T is in block if:<br/><span style="font-family:monospace;">Computed MerkleRoot' == MerkleRoot in local Chain</span><br/><br/></li>
        <li style="list-style-type:none !imporatnt;">&rarr;No need to trust anyone!</li>
        <li>&rarr;You "just" have to be on the correct (i.e. longest) chain.</li>
      </ul>
    </article>
  </slide>

  <slide class="">
    <hgroup><h2>Works very well for&hellip;</h2></hgroup>
    <article class="large-list">
      <ul>
        <li>Simple blockchains with key-value pairs</li>
        <li>Databases</li>
        <li>Version Control Systems</li>
        <li>Filesystems</li>
        <li>&hellip;</li>
      </ul>
      <br/>
      &rarr;Authenticate a small amount of data in a very large dataset
    </article>
  </slide>

  <slide class="">
    <hgroup><h2>
      Shortcomings
    </h2></hgroup>
    <article class="large-list">
      Not possible to proof anything about current state.<br/><br/>

      <ul>
        <li>
          What is the balance of an account?<br/>
          &rarr;You can ask full nodes, but no way to verify.<br/><br/>
        </li>
        <li>
          Who is the owner of some digital asset?<br/><br/>
        </li>
        <li>
          What is the status of a smart contract?
        </li>
      </ul>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Ethereum</h2></hgroup>
    <article class="large-list">
      <ul>
        <li>Blockchain with turing-complete smart contracts<br/><br/></li>
        <li>Contract accounts can get into arbitrary states<br/><br/></li>
        <li>&rarr;No longer just key-value state pairs</li>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>Ethereum: Three Merkle Trees in Header</h2></hgroup>
    <article class="">
      <ul class="large-list">
        <li>Transactions<br/><br/></li>
        <li>Receipts<br/><br/>
        The effect of the block</li>
        <li>State<br/>Merkle Tree representing entire state of network<br/>(i.e. each account)</li>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>
      Possibilities
    </h2></hgroup>
    <article class="build">
        <ul class="build large-list" style="margin-top:-15px">
          <li>Was transaction T included in this block?<br/><br/></li>

          <li>
            Fetch me all events of type T emmited by address A in the last two weeks
            <br/><br/>
          </li>
          <li>What is the current balance of an account?<br/><br/></li>
          <li>Does account with address A exist?<br/><br/></li>
        </ul>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>
      How?
    </h2></hgroup>
    <article>
        <ul class="build large-list" style="margin-top:-15px">
        <li>
          Full node finds object and returns it with Merkle branch<br/><br/>
        </li>
        <li>
          Light client verifies by computing Merkle root<br/><br/>
        </li>
        <li>
          Mostly doable in <i>O(log(n))</i><br/>
        </li>
        </ul>
    </article>
  </slide>


  <slide class="" >
    <hgroup><h2>
      Example
    </h2></hgroup>
    <article>
        <ul class="large-list" style="margin-top:-15px">
        <li>
          Full node returns "<span class="italic">Balance of A: 13 + Branch up to root</span>"<br/><br/>
        </li>
        <li>
          Light client computes the Merkle root from this<br/><br/>
        </li>
        <li>
          And compares MerkleRoot' == MerkleRoot
        </li>
        </ul>
    </article>
  </slide>


  <slide class="" >
    <hgroup><h2>
      There is more&hellip;
    </h2></hgroup>
    <article class="">
      <p>
        <h3 class="mbr">Merkle State Transition Proofs</h3>
        Pretend to run this transaction on this contract. What would the output be?
      </p>

      <p>
        <h3 class="mbr">Merkle Patricia Tree</h3>
        Merkle Trees are not ideal for insert/delete/etc. 
      </p>
    </article>
  </slide>

  <slide class="" >
    <hgroup><h2>
      Further references
    </h2></hgroup>
    <article class="">
      <center>
        <p>
          <h3>Vitalik Buterin &ndash; Merkling in Ethereum</h3>
          https://blog.ethereum.org/2015/11/15/merkling-in-ethereum/
        </p>

        <p>
          <h3>Ethereum Spec &ndash; Light client protocol</h3>
          https://github.com/ethereum/wiki/wiki/Light-client-protocol
        </p>

        <p>
          <h3>"The Paper"</h3>
          https://bitcoin.org/bitcoin.pdf
        </p>
      </center>
    </article>
  </slide>


  <slide class="thank-you-slide segue nobackground">
    <article class="flexbox vleft">
      <pre class="questions" style="margin-top:-30px;margin-left:60px;line-height:1.6em;background:none;color:white !important;text-align:left;">
SELECT * FROM `questions`;
      </pre>
    </article>
  </slide>


</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
