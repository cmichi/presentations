<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/slide-institute/uulm-128.png"></aside>
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>http://social-network.de/</h2>
      <!--
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
	User is logged in
      -->
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1>My Social Network!&lt;/h1&gt;

&lt;h2&gt;Login&lt;/h2&gt;
&lt;form method="POST" action="/"&gt; &lt;input type="text" name="user" /&gt;
  &lt;input type="text" name="pw" /&gt;
  &lt;input type="submit" value="Login!" /&gt;
&lt;/form&gt;
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://social-network.de/</h2>
    </hgroup>
    <article>
<pre class="prettyprint">
POST / HTTP/1.1
Host: social-network.de

user=santa&pw=claus
</pre>

<pre class="prettyprint">
HTTP/1.1 200 OK
Set-Cookie: sessionid=a212jhu2145912;
            expires=Tue, 29-Mar-2014 19:30:42 GMT;
            Max-Age=2592000;
            Path=/

<html>
…
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://social-network.de/</h2>
      <!--
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
	User is logged in
      -->
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1>My Social Network!&lt;/h1&gt;
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;

&lt;h2&gt;My Whiteboard&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Took a walk.&lt;/li&gt;
  &lt;li&gt;First Entry! Hello World :).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;New Entry&lt;/h2&gt;
&lt;form method="GET" action="/new"&gt;
  &lt;input type="text" name="entry" /&gt;
  &lt;input type="submit" value="Submit!" /&gt;
&lt;/form&gt;
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>HTTP</h2>
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
GET /new?entry=huhu HTTP/1.1
Host: social-network.de
Cookie: sessionid=a212jhu2145912;
</pre>

<pre class="prettyprint" data-lang="HTML">
HTTP/1.1 200 OK

…
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;
&lt;h2&gt;Whiteboard entry 'huhu' created!&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;huhu&lt;/li&gt;
  &lt;li&gt;Took a walk.&lt;/li&gt;
  &lt;li&gt;First Entry! Hello World :).&lt;/li&gt;
&lt;/ul&gt;
…
</pre>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red">What is the problem?</span></h2>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://cat-gifs-forum.com/</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;


&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img src="http://funny.com/cat.gif" /&gt;
&lt;/div&gt;

&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img 
    src="http://social-network.de/?entry=buy%20cheap%20pharmacy%20at%20www.medicals.org"/&gt;
&lt;/div&gt;
</pre>
    </article>
  </slide>

  <slide>
    <article>
<pre class="prettyprint" data-lang="HTML">
GET / HTTP/1.1
Host: cat-gifs-forum.com
---------------------
HTTP/1.1 200 OK

&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;
</pre>

<pre class="prettyprint" data-lang="HTML">
GET /cat.gif HTTP/1.1
Host: funny.com
---------------------
HTTP/1.1 200 OK
…
</pre>

<pre class="prettyprint" data-lang="HTML">
GET /new?entry=buy%20cheap%20pharmacy%20at%20www.medicals.org HTTP/1.1
Host: social-network.de
Cookie: sessionid=a212jhu2145912;
---------------------
HTTP/1.1 200 OK

&lt;strong&gt;Logged in as: santa&lt;/strong&gt;
&lt;h2&gt;Whiteboard entry 'buy cheap pharmacy…' created!&lt;/h2&gt;
…
</pre>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red"><code>POST</code> instead of <code>GET</code>?</span></h2>
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>http://social-network.de/</h2>
      <!--
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
	User is logged in
      -->
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1>My Social Network!&lt;/h1&gt;
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;

&lt;h2&gt;My Whiteboard&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Took a walk.&lt;/li&gt;
  &lt;li&gt;First Entry! Hello World :).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;New Entry&lt;/h2&gt;
&lt;form method="POST" action="/new"&gt;
  &lt;input type="text" name="entry" /&gt;
  &lt;input type="submit" value="Submit!" /&gt;
&lt;/form&gt;
</pre>
    </article>
  </slide>

  <slide class="hidden">
    <hgroup>
      <h2>HTTP</h2>
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
POST /new HTTP/1.1
Host: social-network.de
Cookie: sessionid=a212jhu2145912;
</pre>

<pre class="prettyprint" data-lang="HTML">
HTTP/1.1 200 OK

…
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;
&lt;h2&gt;Whiteboard entry 'huhu' created!&lt;/h2&gt;
…
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://cat-gifs-forum.com/</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;


&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img src="http://funny.com/cat.gif" /&gt;
&lt;/div&gt;

&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img src="<b style="background-color:lightblue">http://somesite/cat.gif"/&gt;
  &lt;form name="frmCSRF" method="POST" action="http://social-network.de/new/"&gt;
    &lt;input type="hidden" name="entry" value="buy cheap pharmacy at www.medicals.org"/&gt;
  &lt;/form&gt;
  &lt;script&gt;document.frmCSRF.submit(); &lt;/script&gt;&lt;br</b>/&gt;
&lt;/div&gt;
</pre>
    </article>
  </slide>

  <slide>
    <article>
<pre class="prettyprint" data-lang="HTML">
GET / HTTP/1.1
Host: cat-gifs-forum.com
---------------------
HTTP/1.1 200 OK

&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;
</pre>

<pre class="prettyprint" data-lang="HTML">
GET /cat.gif HTTP/1.1
Host: funny.com
---------------------
HTTP/1.1 200 OK
…
</pre>

<pre class="prettyprint" data-lang="HTML">
POST /
Host: social-network.de
Cookie: sessionid=a212jhu2145912;

entry=buy%20cheap%20pharmacy%20at%20www.medicals.org
---------------------
HTTP/1.1 200 OK

&lt;strong&gt;Logged in as: santa&lt;/strong&gt;
&lt;h2&gt;Whiteboard entry 'buy cheap pharmacy…' created!&lt;/h2&gt;
…
</pre>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red">What is the problem?</span></h2>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://cat-gifs-forum.com/</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;


&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img src="http://funny.com/cat.gif" /&gt;
&lt;/div&gt;

&lt;div class="post"&gt;
  Look at my funny gif!
  &lt;img 
    src="http://social-network.de/?entry=buy%20cheap%20pharmacy%20at%20www.medicals.org"/&gt;
&lt;/div&gt;
</pre>
    </article>
  </slide>

  <slide>
    <article>
<pre class="prettyprint" data-lang="HTML">
GET / HTTP/1.1
Host: cat-gifs-forum.com
---------------------
HTTP/1.1 200 OK

&lt;h1&gt;Cat GIFs Forum!&lt;/h1&gt;
</pre>

<pre class="prettyprint" data-lang="HTML">
GET /cat.gif HTTP/1.1
Host: funny.com
---------------------
HTTP/1.1 200 OK
…
</pre>

<pre class="prettyprint" data-lang="HTML">
GET /new?entry=buy%20cheap%20pharmacy%20at%20www.medicals.org HTTP/1.1
Host: social-network.de
Cookie: sessionid=a212jhu2145912;
---------------------
HTTP/1.1 200 OK

&lt;strong&gt;Logged in as: santa&lt;/strong&gt;
&lt;h2&gt;Whiteboard entry 'buy cheap pharmacy…' created!&lt;/h2&gt;
…
</pre>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red"><code>POST</code> instead of <code>GET</code>?</span></h2>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>http://social-network.de/</h2>
      <!--
      <h3>Stateless: each request contains all information necessary to
      process it.</h3>
	User is logged in
      -->
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="HTML">
&lt;h1>My Social Network!&lt;/h1&gt;
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;

&lt;h2&gt;My Whiteboard&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Took a walk.&lt;/li&gt;
  &lt;li&gt;First Entry! Hello World :).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;New Entry&lt;/h2&gt;
&lt;form method="POST" action="/new"&gt;
  &lt;input type="text" name="entry" /&gt;
  &lt;input type="submit" value="Submit!" /&gt;
&lt;/form&gt;
</pre>
    </article>
  </slide>

  <slide class="">
      <hgroup>
	      <h2><span class="uni-red">Anti measures?</span></h2>
	      <h3><em>Synchronizer Token Pattern</em></h3>
      </hgroup>
    <article class="flexbox vcenter">
<pre class="prettyprint" data-lang="HTML" style="margin-top:-50px !important;">
&lt;h1>My Social Network!&lt;/h1&gt;
&lt;strong&gt;Logged in as: santa&lt;/strong&gt;

&lt;h2&gt;My Whiteboard&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Took a walk.&lt;/li&gt;
  &lt;li&gt;First Entry! Hello World :).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;New Entry&lt;/h2&gt;
&lt;form method="POST" action="/new"&gt;
  <b style="background-color:lightblue;">&lt;!-- generating a new, randomized token for each request --&gt;</b>
  <b style="background-color:lightblue;">&lt;input type="hidden" name="token" value="a329ukjsdf1" /&gt;</b>
  &lt;input type="text" name="entry" /&gt;
  &lt;input type="submit" value="Submit!" /&gt;
&lt;/form&gt;
</pre>
    </article>
  </slide>

  <!--
	evtl. slide dazu, dass manche applikationen das verballern, weil 
	sie den token in der url uebertrage (leaking via e.g. browser history)
  -->

  <slide class="">
      <hgroup>
	      <h2><span class="uni-red">(Sessionless) Anti measures?</span></h2>
	      <h3><em>Double Submit Cookies</em></h3>
      </hgroup>
    <article class="flexbox vcenter">
    	<ul>
		<li>Server generates random token and saves it in cookie</li>
		<li>When creating form random token value is used in hidden input</li>
		<li>Server checks if submitted hidden input === value in cookie</li>
	</ul>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red">Why?</span></h2>
      <h3>(dolor sit amet)</h3>
    </article>
  </slide>

  <slide class="">
    <article class="flexbox vcenter">
      <h2 style="font-size:2em"><span class="uni-red">How?</span></h2>
      <h3>(dolor sit amet)</h3>
    </article>
  </slide>

<!--
  multi-step, semi-blind csr
  ideas to prevent it
  * only accept post?
   * stops simple get based attacks
   * referrer checking
    * some users prevent referrer sending due to privacy
    * techniques to create http reqs without referrers exist
  * multi-step transactions
   * csrf can perform each step in order
   CSRF attacks using image tags are often made from Internet forums, where
   users are allowed to post images but not JavaScript.
   -->

  <slide class="thank-you-slide segue nobackground">
    <article class="flexbox vleft">
      <h2>Dankesch&ouml;n!</h2>
      <br /> <br /> <br />

      <pre class="prettyprint questions" data-lang="javascript" >
speakername.ask(questions);
      </pre>

	<br/> <br/> <br/>

	<p style="font-size:0.7em;text-align:right;">
      <img src="images/by.svg" style="float:right;margin-left:25px;" />
      This presentation is licensed under the <br />
      <a style="color:white;" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International</a> 
      license.
      </p>

    </article>
    <p class="auto-fadein" data-config-contact style="display:none;">
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
